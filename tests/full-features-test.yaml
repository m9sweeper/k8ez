---
# Source: k8ez/templates/pod-disruption-budget.yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: test-everything-app
  labels:
    app: test-everything-app
    release: test-everything-app
    chart: k8ez-1.0.0
    heritage: Helm
    version: 1.0.0
spec:
  minAvailable: 50%
  selector:
    matchLabels:
      app: test-everything-app
      release: test-everything-app
---
# Source: k8ez/templates/serviceaccount.yaml
apiVersion: v1
kind: ServiceAccount
metadata:
  name: test-everything-app
  labels:
    app: test-everything-app
    release: test-everything-app
    chart: k8ez-1.0.0
    heritage: Helm
    version: 1.0.0
---
# Source: k8ez/templates/secret.yaml
apiVersion: v1
kind: Secret
metadata:
  name: test-everything-app
  labels:
    app: test-everything-app
    release: test-everything-app
    chart: k8ez-1.0.0
    heritage: Helm
    version: 1.0.0
type: Opaque
data:
  SECRET: dmFsdWU=
---
# Source: k8ez/templates/configmap-files.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: all-yaml
  labels:
    app: test-everything-app
    release: test-everything-app
    chart: k8ez-1.0.0
    heritage: Helm
    version: 1.0.0
data:
  example-file.yaml: |-
    example-root:
      example-key: exampleValue
---
# Source: k8ez/templates/configmap.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: test-everything-app
  labels:
    app: test-everything-app
    release: test-everything-app
    chart: k8ez-1.0.0
    heritage: Helm
    version: 1.0.0
data:
  K8EZ: "YES"
---
# Source: k8ez/templates/pvc.yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: test-everything-app-myvolumeclaim
  labels:
    app: test-everything-app
    release: test-everything-app
    chart: k8ez-1.0.0
    heritage: Helm
    version: 1.0.0
spec:
  accessModes:
  - ReadWriteMany
  storageClassName: default
  resources:
    requests:
      storage: 50Gi
---
# Source: k8ez/templates/extra-deployments.yaml
apiVersion: v1
kind: Service
metadata:
  name: test-everything-app-extra-redis-deployment-one
  labels:
    app: test-everything-app-extra-redis-deployment-one
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  type: ClusterIP
  ports:
    - port: 4000
      targetPort: 4000
      name: http
  selector:
      app: test-everything-app-extra-redis-deployment-one
      release: test-everything-app
---
# Source: k8ez/templates/extra-deployments.yaml
apiVersion: v1
kind: Service
metadata:
  name: test-everything-app-extra-redis-deployment-two
  labels:
    app: test-everything-app-extra-redis-deployment-two
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  type: ClusterIP
  ports:
    - port: 4000
      targetPort: 4000
      name: http
  selector:
      app: test-everything-app-extra-redis-deployment-two
      release: test-everything-app
---
# Source: k8ez/templates/service.yaml
apiVersion: v1
kind: Service
metadata:
  name: test-everything-app
  labels:
    app: test-everything-app
    release: test-everything-app
    chart: k8ez-1.0.0
    heritage: Helm
    version: 1.0.0
spec:
  type: ClusterIP
  ports:
    - port: 80
      targetPort: 80
      name: http
  selector:
    app: test-everything-app
    release: test-everything-app
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: v1
kind: Service
metadata:
  name: test-everything-app-statefulSetWithImageString
  labels:
    app: test-everything-app-statefulSetWithImageString
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  clusterIP: None  
  ports:
    - port: 4000
      targetPort: 4000
      name: http
  selector:
    app: test-everything-app-statefulSetWithImageString
    release: test-everything-app
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: v1
kind: Service
metadata:
  name: test-everything-app-statefulSetWithImageDict
  labels:
    app: test-everything-app-statefulSetWithImageDict
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  clusterIP: None  
  ports:
    - port: 4000
      targetPort: 4000
      name: http
  selector:
    app: test-everything-app-statefulSetWithImageDict
    release: test-everything-app
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: v1
kind: Service
metadata:
  name: test-everything-app-statefulSetWithImageOnly
  labels:
    app: test-everything-app-statefulSetWithImageOnly
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  clusterIP: None  
  ports:
    - port: 4000
      targetPort: 4000
      name: http
  selector:
    app: test-everything-app-statefulSetWithImageOnly
    release: test-everything-app
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: v1
kind: Service
metadata:
  name: test-everything-app-statefulSetWithTagOnly
  labels:
    app: test-everything-app-statefulSetWithTagOnly
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  clusterIP: None  
  ports:
    - port: 4000
      targetPort: 4000
      name: http
  selector:
    app: test-everything-app-statefulSetWithTagOnly
    release: test-everything-app
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: v1
kind: Service
metadata:
  name: test-everything-app-statefulSetWithEmptyImage
  labels:
    app: test-everything-app-statefulSetWithEmptyImage
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  clusterIP: None  
  ports:
    - port: 4000
      targetPort: 4000
      name: http
  selector:
    app: test-everything-app-statefulSetWithEmptyImage
    release: test-everything-app
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: v1
kind: Service
metadata:
  name: test-everything-app-statefulSetWithoutImageInfo
  labels:
    app: test-everything-app-statefulSetWithoutImageInfo
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  clusterIP: None  
  ports:
    - port: 4000
      targetPort: 4000
      name: http
  selector:
    app: test-everything-app-statefulSetWithoutImageInfo
    release: test-everything-app
---
# Source: k8ez/templates/deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: test-everything-app
  labels:
    app: test-everything-app
    release: test-everything-app
    chart: k8ez-1.0.0
    heritage: Helm
    version: 1.0.0
spec:
  replicas: 2
  selector:
    matchLabels:
      app: test-everything-app
      release: test-everything-app
  template:
    metadata:
      annotations:
        checksum/test-everything-app-configmap: 0e663f4583951ab36dc7aecbef55a00c05ce2cee874bfce9593fd49a8139b850
        checksum/test-everything-app-secret: df3cf63a339c34203251c4cb7fed0216e0cf99ea374286b95c7100c3686ad038
        sidecar.istio.io/inject: "false"
        someExtraAnnotation: annotationValueHere
      labels:
        app: test-everything-app
        release: test-everything-app
        chart: k8ez-1.0.0
        heritage: Helm
        version: 1.0.0
    spec:
      serviceAccount: test-everything-app
      enableServiceLinks: true
      securityContext:
        fsGroup: 1050
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                  - key: "app"
                    operator: In
                    values:
                    - "test-everything-app"
                  - key: "release"
                    operator: In
                    values:
                    - "test-everything-app"
              topologyKey: kubernetes.io/hostname
      containers:
        - name: "test-everything-app"
          image: redis:7.2.1
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            runAsGroup: 999
            runAsNonRoot: true
            runAsUser: 999
            seccompProfile:
              type: RuntimeDefault
          ports:
            - containerPort: 80
          command: ["sh"]
          args:
          - -c
          - sleep 1000
          envFrom:
          - configMapRef:
              name: test-everything-app
          - secretRef:
              name: test-everything-app
          volumeMounts:
            - mountPath: /mount
              name: mydir
          resources:
            limits:
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 128Mi
      volumes:
      - hostPath:
          path: /var/local/aaa
          type: DirectoryOrCreate
        name: mydir
---
# Source: k8ez/templates/extra-deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: test-everything-app-extra-redis-deployment-one
  labels:
    app: test-everything-app-extra-redis-deployment-one
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  replicas: 1
  selector:
    matchLabels:
      app: test-everything-app-extra-redis-deployment-one
      release: test-everything-app
  template:
    metadata:
      annotations:
        checksum/test-everything-app-configmap: 0e663f4583951ab36dc7aecbef55a00c05ce2cee874bfce9593fd49a8139b850
        checksum/test-everything-app-secret: df3cf63a339c34203251c4cb7fed0216e0cf99ea374286b95c7100c3686ad038
        sidecar.istio.io/inject: "false"        
        someExtraAnnotation: annotationValueHere
      labels:
        app: test-everything-app-extra-redis-deployment-one
        chart: k8ez-1.0.0
        heritage: Helm
        release: test-everything-app
        version: 1.0.0
    spec:
      serviceAccount: test-everything-app
      enableServiceLinks: true
      securityContext:
        fsGroup: 1050
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                  - key: "app"
                    operator: In
                    values:
                      - "test-everything-app-extra-redis-deployment-one"
                  - key: "release"
                    operator: In
                    values:
                      - "test-everything-app"
              topologyKey: kubernetes.io/hostname
      containers:
        - name: "test-everything-app-extra-redis-deployment-one"
          image: "redis"
          imagePullPolicy: Always
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            runAsGroup: 999
            runAsNonRoot: true
            runAsUser: 999
            seccompProfile:
              type: RuntimeDefault
          ports:
            - containerPort: 4000
          command: ["sh"]
          args:
          - -c
          - sleep 1000
          env:
          - name: "ENVVAR"
            value: "value"
          envFrom:
          - configMapRef:
              name: test-everything-app
          - secretRef:
              name: test-everything-app
          volumeMounts:
            - mountPath: /mount
              name: mydir
          resources:
            limits:
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 128Mi      
      volumes:
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
---
# Source: k8ez/templates/extra-deployments.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: test-everything-app-extra-redis-deployment-two
  labels:
    app: test-everything-app-extra-redis-deployment-two
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  replicas: 1
  selector:
    matchLabels:
      app: test-everything-app-extra-redis-deployment-two
      release: test-everything-app
  template:
    metadata:
      annotations:
        checksum/test-everything-app-configmap: 0e663f4583951ab36dc7aecbef55a00c05ce2cee874bfce9593fd49a8139b850
        checksum/test-everything-app-secret: df3cf63a339c34203251c4cb7fed0216e0cf99ea374286b95c7100c3686ad038
        sidecar.istio.io/inject: "false"        
        someExtraAnnotation: annotationValueHere
      labels:
        app: test-everything-app-extra-redis-deployment-two
        chart: k8ez-1.0.0
        heritage: Helm
        release: test-everything-app
        version: 1.0.0
    spec:
      serviceAccount: test-everything-app
      enableServiceLinks: true
      securityContext:
        fsGroup: 1050
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                  - key: "app"
                    operator: In
                    values:
                      - "test-everything-app-extra-redis-deployment-two"
                  - key: "release"
                    operator: In
                    values:
                      - "test-everything-app"
              topologyKey: kubernetes.io/hostname
      containers:
        - name: "test-everything-app-extra-redis-deployment-two"
          image: "redis"
          imagePullPolicy: Always
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            runAsGroup: 999
            runAsNonRoot: true
            runAsUser: 999
            seccompProfile:
              type: RuntimeDefault
          ports:
            - containerPort: 4000
          command: ["sh"]
          args:
          - -c
          - sleep 1000
          env:
          - name: "ENVVAR"
            value: "value"
          envFrom:
          - configMapRef:
              name: test-everything-app
          - secretRef:
              name: test-everything-app
          volumeMounts:
            - mountPath: /mount
              name: mydir
          resources:
            limits:
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 128Mi      
      volumes:
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: test-everything-app-statefulSetWithImageString
  labels:
    app: test-everything-app-statefulSetWithImageString
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  replicas: 1
  selector:
    matchLabels:
      app: test-everything-app-statefulSetWithImageString
      release: test-everything-app
  serviceName: test-everything-app-statefulSetWithImageString
  template:
    metadata:
      annotations:
        checksum/test-everything-app-configmap: 0e663f4583951ab36dc7aecbef55a00c05ce2cee874bfce9593fd49a8139b850
        checksum/test-everything-app-secret: df3cf63a339c34203251c4cb7fed0216e0cf99ea374286b95c7100c3686ad038
        sidecar.istio.io/inject: "false"        
        annotationInfo: exclude global, include extras
        imageType: image string
        resources: custom limits (limits.memory 256Mi, requests.cpu 200m, requests.memory
          128Mi)
      labels:
        app: test-everything-app-statefulSetWithImageString
        chart: k8ez-1.0.0
        heritage: Helm
        release: test-everything-app
        version: 1.0.0
    spec:
      enableServiceLinks: true
      securityContext:
        fsGroup: 1050
      terminationGracePeriodSeconds: 10
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                  - key: "app"
                    operator: In
                    values:
                    - "test-everything-app-statefulSetWithImageString"
                  - key: "release"
                    operator: In
                    values:
                    - "test-everything-app"
              topologyKey: kubernetes.io/hostname
      containers:
        - name: "test-everything-app-statefulSetWithImageString"
          image: "myImageOne"
          imagePullPolicy: Always
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            runAsGroup: 999
            runAsNonRoot: true
            runAsUser: 999
            seccompProfile:
              type: RuntimeDefault
          ports:
            - containerPort: 4000
          command: ["sh"]
          args:
          - -c
          - sleep 1000
          env:
          - name: "ENVVAR"
            value: "value"
          envFrom:
          - configMapRef:
              name: test-everything-app
          - secretRef:
              name: test-everything-app
          volumeMounts:
            - mountPath: /mount
              name: mydir
          resources:
            limits:
              memory: 256Mi      
      volumes:
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: test-everything-app-statefulSetWithImageDict
  labels:
    app: test-everything-app-statefulSetWithImageDict
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  replicas: 
  selector:
    matchLabels:
      app: test-everything-app-statefulSetWithImageDict
      release: test-everything-app
  serviceName: test-everything-app-statefulSetWithImageDict
  template:
    metadata:
      annotations:
        checksum/test-everything-app-configmap: 0e663f4583951ab36dc7aecbef55a00c05ce2cee874bfce9593fd49a8139b850
        checksum/test-everything-app-secret: df3cf63a339c34203251c4cb7fed0216e0cf99ea374286b95c7100c3686ad038
        sidecar.istio.io/inject: "false"        
        someExtraAnnotation: annotationValueHere
        annotationInfo: include global and extras
        imageType: full dictionary
      labels:
        app: test-everything-app-statefulSetWithImageDict
        chart: k8ez-1.0.0
        heritage: Helm
        release: test-everything-app
        version: 1.0.0
    spec:
      enableServiceLinks: true
      securityContext:
        fsGroup: 1050
      terminationGracePeriodSeconds: 10
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                  - key: "app"
                    operator: In
                    values:
                    - "test-everything-app-statefulSetWithImageDict"
                  - key: "release"
                    operator: In
                    values:
                    - "test-everything-app"
              topologyKey: kubernetes.io/hostname
      containers:
        - name: "test-everything-app-statefulSetWithImageDict"
          image: "myImageTwo:myTagTwo"
          
          imagePullPolicy: 
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            runAsGroup: 999
            runAsNonRoot: true
            runAsUser: 999
            seccompProfile:
              type: RuntimeDefault
          ports:
            - containerPort: 4000
          envFrom:
          - configMapRef:
              name: test-everything-app
          - secretRef:
              name: test-everything-app
          resources:
            limits:
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 128Mi      
      volumes:
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: test-everything-app-statefulSetWithImageOnly
  labels:
    app: test-everything-app-statefulSetWithImageOnly
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  replicas: 
  selector:
    matchLabels:
      app: test-everything-app-statefulSetWithImageOnly
      release: test-everything-app
  serviceName: test-everything-app-statefulSetWithImageOnly
  template:
    metadata:
      annotations:
        checksum/test-everything-app-configmap: 0e663f4583951ab36dc7aecbef55a00c05ce2cee874bfce9593fd49a8139b850
        checksum/test-everything-app-secret: df3cf63a339c34203251c4cb7fed0216e0cf99ea374286b95c7100c3686ad038
        sidecar.istio.io/inject: "false"        
        someExtraAnnotation: annotationValueHere
        annotationInfo: include global and extras
        imageType: dictionary with image only
      labels:
        app: test-everything-app-statefulSetWithImageOnly
        chart: k8ez-1.0.0
        heritage: Helm
        release: test-everything-app
        version: 1.0.0
    spec:
      enableServiceLinks: true
      securityContext:
        fsGroup: 1050
      terminationGracePeriodSeconds: 10
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                  - key: "app"
                    operator: In
                    values:
                    - "test-everything-app-statefulSetWithImageOnly"
                  - key: "release"
                    operator: In
                    values:
                    - "test-everything-app"
              topologyKey: kubernetes.io/hostname
      containers:
        - name: "test-everything-app-statefulSetWithImageOnly"
          image: "separateImageOnly"
          
          imagePullPolicy: 
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            runAsGroup: 999
            runAsNonRoot: true
            runAsUser: 999
            seccompProfile:
              type: RuntimeDefault
          ports:
            - containerPort: 4000
          envFrom:
          - configMapRef:
              name: test-everything-app
          - secretRef:
              name: test-everything-app
          resources:
            limits:
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 128Mi      
      volumes:
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: test-everything-app-statefulSetWithTagOnly
  labels:
    app: test-everything-app-statefulSetWithTagOnly
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  replicas: 
  selector:
    matchLabels:
      app: test-everything-app-statefulSetWithTagOnly
      release: test-everything-app
  serviceName: test-everything-app-statefulSetWithTagOnly
  template:
    metadata:
      annotations:
        checksum/test-everything-app-configmap: 0e663f4583951ab36dc7aecbef55a00c05ce2cee874bfce9593fd49a8139b850
        checksum/test-everything-app-secret: df3cf63a339c34203251c4cb7fed0216e0cf99ea374286b95c7100c3686ad038
        sidecar.istio.io/inject: "false"        
        someExtraAnnotation: annotationValueHere
        annotationInfo: include global and extras
        imageType: dictionary with tag only (should use default image with custom tag)
      labels:
        app: test-everything-app-statefulSetWithTagOnly
        chart: k8ez-1.0.0
        heritage: Helm
        release: test-everything-app
        version: 1.0.0
    spec:
      enableServiceLinks: true
      securityContext:
        fsGroup: 1050
      terminationGracePeriodSeconds: 10
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                  - key: "app"
                    operator: In
                    values:
                    - "test-everything-app-statefulSetWithTagOnly"
                  - key: "release"
                    operator: In
                    values:
                    - "test-everything-app"
              topologyKey: kubernetes.io/hostname
      containers:
        - name: "test-everything-app-statefulSetWithTagOnly"
          image: "redis:separateTagOnly"
          
          imagePullPolicy: 
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            runAsGroup: 999
            runAsNonRoot: true
            runAsUser: 999
            seccompProfile:
              type: RuntimeDefault
          ports:
            - containerPort: 4000
          envFrom:
          - configMapRef:
              name: test-everything-app
          - secretRef:
              name: test-everything-app
          resources:
            limits:
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 128Mi      
      volumes:
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: test-everything-app-statefulSetWithEmptyImage
  labels:
    app: test-everything-app-statefulSetWithEmptyImage
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  replicas: 
  selector:
    matchLabels:
      app: test-everything-app-statefulSetWithEmptyImage
      release: test-everything-app
  serviceName: test-everything-app-statefulSetWithEmptyImage
  template:
    metadata:
      annotations:
        checksum/test-everything-app-configmap: 0e663f4583951ab36dc7aecbef55a00c05ce2cee874bfce9593fd49a8139b850
        checksum/test-everything-app-secret: df3cf63a339c34203251c4cb7fed0216e0cf99ea374286b95c7100c3686ad038
        sidecar.istio.io/inject: "false"        
        annotationInfo: exclude global, include extras
        imageType: empty dictionary (should use default)
      labels:
        app: test-everything-app-statefulSetWithEmptyImage
        chart: k8ez-1.0.0
        heritage: Helm
        release: test-everything-app
        version: 1.0.0
    spec:
      enableServiceLinks: true
      securityContext:
        fsGroup: 1050
      terminationGracePeriodSeconds: 10
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                  - key: "app"
                    operator: In
                    values:
                    - "test-everything-app-statefulSetWithEmptyImage"
                  - key: "release"
                    operator: In
                    values:
                    - "test-everything-app"
              topologyKey: kubernetes.io/hostname
      containers:
        - name: "test-everything-app-statefulSetWithEmptyImage"
          image: "redis:7.2.1"
          imagePullPolicy: Always
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            runAsGroup: 999
            runAsNonRoot: true
            runAsUser: 999
            seccompProfile:
              type: RuntimeDefault
          ports:
            - containerPort: 4000
          envFrom:
          - configMapRef:
              name: test-everything-app
          - secretRef:
              name: test-everything-app
          resources:
            limits:
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 128Mi      
      volumes:
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
---
# Source: k8ez/templates/statefulsets.yaml
apiVersion: apps/v1
kind: StatefulSet
metadata:
  name: test-everything-app-statefulSetWithoutImageInfo
  labels:
    app: test-everything-app-statefulSetWithoutImageInfo
    chart: k8ez-1.0.0
    heritage: Helm
    release: test-everything-app
    version: 1.0.0
spec:
  replicas: 
  selector:
    matchLabels:
      app: test-everything-app-statefulSetWithoutImageInfo
      release: test-everything-app
  serviceName: test-everything-app-statefulSetWithoutImageInfo
  template:
    metadata:
      annotations:
        checksum/test-everything-app-configmap: 0e663f4583951ab36dc7aecbef55a00c05ce2cee874bfce9593fd49a8139b850
        checksum/test-everything-app-secret: df3cf63a339c34203251c4cb7fed0216e0cf99ea374286b95c7100c3686ad038
        sidecar.istio.io/inject: "false"        
        annotationInfo: exclude global, include extras
        imageType: none included (should use default)
      labels:
        app: test-everything-app-statefulSetWithoutImageInfo
        chart: k8ez-1.0.0
        heritage: Helm
        release: test-everything-app
        version: 1.0.0
    spec:
      enableServiceLinks: true
      securityContext:
        fsGroup: 1050
      terminationGracePeriodSeconds: 10
      affinity:
        podAntiAffinity:
          preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchExpressions:
                  - key: "app"
                    operator: In
                    values:
                    - "test-everything-app-statefulSetWithoutImageInfo"
                  - key: "release"
                    operator: In
                    values:
                    - "test-everything-app"
              topologyKey: kubernetes.io/hostname
      containers:
        - name: "test-everything-app-statefulSetWithoutImageInfo"
          image: "redis:7.2.1"
          imagePullPolicy: Always
          securityContext:
            allowPrivilegeEscalation: false
            capabilities:
              drop:
              - ALL
            privileged: false
            runAsGroup: 999
            runAsNonRoot: true
            runAsUser: 999
            seccompProfile:
              type: RuntimeDefault
          ports:
            - containerPort: 4000
          envFrom:
          - configMapRef:
              name: test-everything-app
          - secretRef:
              name: test-everything-app
          resources:
            limits:
              memory: 512Mi
            requests:
              cpu: 200m
              memory: 128Mi      
      volumes:
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
---
# Source: k8ez/templates/jobs.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: test-everything-app-job-example-job
  annotations:
    checksum/test-everything-app-configmap: 0e663f4583951ab36dc7aecbef55a00c05ce2cee874bfce9593fd49a8139b850
    checksum/test-everything-app-secret: df3cf63a339c34203251c4cb7fed0216e0cf99ea374286b95c7100c3686ad038    
    someExtraAnnotation: annotationValueHere
    jobExtraAnnotation: something
spec:
  template:
    metadata:
      annotations:
        checksum/test-everything-app-configmap: 0e663f4583951ab36dc7aecbef55a00c05ce2cee874bfce9593fd49a8139b850
        checksum/test-everything-app-secret: df3cf63a339c34203251c4cb7fed0216e0cf99ea374286b95c7100c3686ad038
        sidecar.istio.io/inject: "false"        
        someExtraAnnotation: annotationValueHere
        jobExtraAnnotation: something
    spec:
      serviceAccount: test-everything-app
      enableServiceLinks: true
      securityContext:
        fsGroup: 1050
      restartPolicy: Never
      containers:
      - name: "test-everything-app-job-example-job"
        image: "redis"
        imagePullPolicy: Always
        securityContext:
          allowPrivilegeEscalation: false
          capabilities:
            drop:
            - ALL
          privileged: false
          runAsGroup: 999
          runAsNonRoot: true
          runAsUser: 999
          seccompProfile:
            type: RuntimeDefault
        command: ["sh"]
        args:
        - -c
        - sleep 1000
        env:
        - name: "ENVVAR"
          value: "value"
        envFrom:
        - configMapRef:
            name: test-everything-app
        - secretRef:
            name: test-everything-app
        volumeMounts:
          - mountPath: /mount
            name: mydir
        resources:
          limits:
            memory: 512Mi
          requests:
            cpu: 200m
            memory: 128Mi      
      volumes:
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
        - hostPath:
            path: /var/local/aaa
            type: DirectoryOrCreate
          name: mydir
  backoffLimit: 0
---
# Source: k8ez/templates/cronjobs.yaml
apiVersion: batch/v1beta1
kind: CronJob
metadata:
  name: test-everything-app-example-cronjob
  labels:  
    app: test-everything-app
    release: test-everything-app
    chart: k8ez-1.0.0
    heritage: Helm
    version: 1.0.0
spec:
  concurrencyPolicy: Forbid
  jobTemplate:
    spec:
      template:
        metadata:
          annotations:
            sidecar.istio.io/inject: "false"
            someExtraAnnotation: annotationValueHere
        spec:
          serviceAccount: test-everything-app
          enableServiceLinks: true
          securityContext:
            fsGroup: 1050
          containers:
            - name: example-cronjob
              image: "redis"
              imagePullPolicy: Always
              securityContext:
                allowPrivilegeEscalation: false
                capabilities:
                  drop:
                  - ALL
                privileged: false
                runAsGroup: 999
                runAsNonRoot: true
                runAsUser: 999
                seccompProfile:
                  type: RuntimeDefault
              command: ["sh"]
              args:
              - -c
              - sleep 1000
              env:
              - name: "ENVVAR"
                value: "value"
              envFrom:
              - configMapRef:
                  name: test-everything-app
              - secretRef:
                  name: test-everything-app
              volumeMounts:
              - mountPath: /mount
                name: mydir
              resources:
                limits:
                  memory: 512Mi
                requests:
                  cpu: 200m
                  memory: 128Mi

          restartPolicy: Never
          volumes:
          - hostPath:
              path: /var/local/aaa
              type: DirectoryOrCreate
            name: mydir

  schedule: "30 * * * *"
---
# Source: k8ez/templates/ingress-kubernetes.yaml
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: test-everything-app
  labels:
    app: test-everything-app
    release: test-everything-app
    chart: k8ez-1.0.0
    heritage: Helm
    version: 1.0.0
  annotations:
    kubernetes.io/ingress.class: nginx
spec:
  rules:
    - host: example.local
      http:
        paths:
        - path: /
          backend:
            serviceName: test-everything-app
            servicePort: 80
